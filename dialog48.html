<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch-Trainer: Imperative im Dialog</title>
    <!-- Polyfill für Drag & Drop (Touch-Geräte) -->
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f0f2f5;
            --chat-a: #e4e6eb;
            --chat-b: #0084ff;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .intro-box {
            background-color: #eaf2f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 6px solid var(--accent-color);
        }

        /* Dialog-Styling */
        .dialog-card {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .bubble {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 1.05em;
            line-height: 1.4;
            position: relative;
        }

        .bubble-a {
            align-self: flex-start;
            background-color: var(--chat-a);
            color: black;
            border-bottom-left-radius: 4px;
        }

        .bubble-b {
            align-self: flex-end;
            background-color: var(--chat-b);
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* Dropdown im Text */
        select {
            background: #fff;
            border: 2px solid #fff;
            border-radius: 5px;
            padding: 2px 5px;
            font-size: 1em;
            font-family: inherit;
            cursor: pointer;
            outline: none;
            color: black;
            font-weight: bold;
        }

        /* Status-Farben für Selects */
        .correct {
            background-color: var(--success-color) !important;
            color: white !important;
            border-color: #1e8449 !important;
        }

        .incorrect {
            background-color: var(--error-color) !important;
            color: white !important;
            border-color: #922b21 !important;
        }

        /* Button-Leiste */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }

        .btn-action {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            font-size: 0.85em;
            transition: opacity 0.2s;
        }

        .btn-reset { background-color: #95a5a6; }
        .btn-solve { background-color: var(--accent-color); }
        .btn-action:hover { opacity: 0.8; }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .bubble { max-width: 95%; }
            .button-group { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Dialog-Training: Imperativ</h1>

    <div class="intro-box">
        <strong>Anleitung:</strong> Vervollständige die Dialoge. Überlege, ob die Person eine (Singular) oder mehrere Personen (Plural/Höflichkeit) anspricht. 
        Wähle die richtige Form aus dem Menü.
    </div>

    <div id="dialog-root"></div>

</div>

<script>
    const dialogs = [
        {
            id: 1,
            textA: "Я не знаю, как это делать.",
            textB: "... учителя!",
            options: ["Спроси", "Спросите", "Спросишь"],
            correct: "Спроси"
        },
        {
            id: 2,
            textA: "Здесь очень жарко.",
            textB: "Пожалуйста, ... окно.",
            options: ["открой", "откройте", "открывай"],
            correct: "открой"
        },
        {
            id: 3,
            textA: "Иван Петрович, вы устали?",
            textB: "Да, немного. — Тогда ... здесь.",
            options: ["садись", "садитесь", "садисься"],
            correct: "садитесь"
        },
        {
            id: 4,
            textA: "Мама, я хочу пить.",
            textB: "... сок на столе.",
            options: ["Возьми", "Возьмите", "Возьмёшь"],
            correct: "Возьми"
        },
        {
            id: 5,
            textA: "Дети, в классе должно быть тихо.",
            textB: "Пожалуйста, ... !",
            options: ["молчи", "молчите", "молчишь"],
            correct: "молчите"
        },
        {
            id: 6,
            textA: "Я плохо слышу музыку.",
            textB: "... погромче!",
            options: ["Сделай", "Сделайте", "Сделаешь"],
            correct: "Сделай"
        },
        {
            id: 7,
            textA: "Мы не понимаем это слово.",
            textB: "... в словаре.",
            options: ["Посмотри", "Посмотрите", "Посмотришь"],
            correct: "Посмотрите"
        },
        {
            id: 8,
            textA: "Завтра у нас важный экзамен.",
            textB: "Поэтому сегодня вечером ... !",
            options: ["занимайся", "занимайтесь", "занимайсясь"],
            correct: "занимайтесь"
        },
        {
            id: 9,
            textA: "Я забыл свой паспорт дома.",
            textB: "Не ... , всё будет хорошо.",
            options: ["переживай", "переживайте", "переживаешь"],
            correct: "переживай"
        },
        {
            id: 10,
            textA: "Анна Ивановна, я хочу с вами познакомиться.",
            textB: "Хорошо, ... о себе.",
            options: ["расскажи", "расскажите", "расскажьте"],
            correct: "расскажите"
        },
        {
            id: 11,
            textA: "Суп слишком горячий.",
            textB: "Немного ... !",
            options: ["подожди", "подождите", "подождёшь"],
            correct: "подожди"
        },
        {
            id: 12,
            textA: "Друзья, нам пора идти.",
            textB: "Быстрее ... !",
            options: ["одевайся", "одевайтесь", "одевайсь"],
            correct: "одевайтесь"
        },
        {
            id: 13,
            textA: "Я очень хочу спать.",
            textB: "Тогда ... пораньше.",
            options: ["ляг", "лягте", "ляжь"],
            correct: "ляг"
        },
        {
            id: 14,
            textA: "Эта книга очень интересная.",
            textB: "Обязательно её ... !",
            options: ["прочитай", "прочитайте", "прочитаи"],
            correct: "прочитай"
        },
        {
            id: 15,
            textA: "Господин директор, подпишите документ.",
            textB: "Хорошо, ... его здесь.",
            options: ["положи", "положите", "положь"],
            correct: "положите"
        },
        {
            id: 16,
            textA: "Я не люблю этот фильм.",
            textB: "Тогда ... другой.",
            options: ["выбери", "выберите", "выберь"],
            correct: "выбери"
        },
        {
            id: 17,
            textA: "Ребята, на улице дождь.",
            textB: "... зонт!",
            options: ["Возьми", "Возьмите", "Возьмте"],
            correct: "Возьмите"
        },
        {
            id: 18,
            textA: "Я боюсь идти туда одна.",
            textB: "Не ... , я пойду с тобой.",
            options: ["бойся", "бойтесь", "бойсясь"],
            correct: "бойся"
        },
        {
            id: 19,
            textA: "Чай очень сладкий.",
            textB: "... больше воды.",
            options: ["Добавь", "Добавьте", "Добави"],
            correct: "Добавь"
        },
        {
            id: 20,
            textA: "Вы говорите очень быстро.",
            textB: "Пожалуйста, ... медленнее.",
            options: ["говори", "говорите", "говорте"],
            correct: "говорите"
        }
    ];

    function initDialogs() {
        const root = document.getElementById('dialog-root');
        dialogs.forEach((d) => {
            const card = document.createElement('div');
            card.className = 'dialog-card';
            card.id = `card-${d.id}`;

            // Dialog-Struktur
            const bubbleA = document.createElement('div');
            bubbleA.className = 'bubble bubble-a';
            bubbleA.innerText = `A: „${d.textA}“`;

            const bubbleB = document.createElement('div');
            bubbleB.className = 'bubble bubble-b';
            
            const part1 = d.textB.split('...')[0];
            const part2 = d.textB.split('...')[1];

            const select = document.createElement('select');
            select.id = `select-${d.id}`;
            select.onchange = function() { checkTask(d.id); };

            const defOpt = document.createElement('option');
            defOpt.value = "";
            defOpt.innerText = "???";
            select.appendChild(defOpt);

            // Optionen mischen
            const shuffled = [...d.options].sort(() => Math.random() - 0.5);
            shuffled.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.innerText = opt;
                select.appendChild(o);
            });

            bubbleB.innerHTML = `B: „${part1}`;
            bubbleB.appendChild(select);
            bubbleB.innerHTML += `${part2}“`;

            // Buttons
            const btnGroup = document.createElement('div');
            btnGroup.className = 'button-group';
            btnGroup.innerHTML = `
                <button class="btn-action btn-reset" onclick="resetTask(${d.id})">Zurücksetzen</button>
                <button class="btn-action btn-solve" onclick="solveTask(${d.id})">Lösung anzeigen</button>
            `;

            card.appendChild(bubbleA);
            card.appendChild(bubbleB);
            card.appendChild(btnGroup);
            root.appendChild(card);
        });
    }

    function checkTask(id) {
        const sel = document.getElementById(`select-${id}`);
        const correctVal = dialogs.find(d => d.id === id).correct;

        if (sel.value === "") {
            sel.className = "";
        } else if (sel.value === correctVal) {
            sel.className = "correct";
        } else {
            sel.className = "incorrect";
        }
    }

    window.resetTask = function(id) {
        const sel = document.getElementById(`select-${id}`);
        sel.value = "";
        sel.className = "";
    };

    window.solveTask = function(id) {
        const sel = document.getElementById(`select-${id}`);
        const correctVal = dialogs.find(d => d.id === id).correct;
        sel.value = correctVal;
        sel.className = "correct";
    };

    // Start
    initDialogs();
</script>

</body>
</html>