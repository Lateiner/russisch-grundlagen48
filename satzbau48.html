<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch-Trainer: Satzbau-Baukasten</title>
    <!-- Polyfill für Drag & Drop (hier primär Klick-Interaktion für bessere Mobile-Nutzung) -->
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .intro-box {
            background-color: #ebf5fb;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 6px solid var(--accent-color);
            line-height: 1.5;
        }

        .task-card {
            background: #fff;
            border: 1px solid #dfe6e9;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .task-header {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--accent-color);
            display: block;
        }

        /* Wort-Pool und Ergebnis-Bereich */
        .word-area {
            min-height: 50px;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            transition: background-color 0.3s;
        }

        .pool {
            background-color: #f8f9fa;
            border: 1px dashed #bdc3c7;
        }

        .result-area {
            background-color: #fff;
            border: 2px solid #ecf0f1;
            min-height: 60px;
        }

        .word-tile {
            padding: 8px 15px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
            font-weight: 500;
            transition: transform 0.1s, background-color 0.2s;
        }

        .word-tile:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        /* Status-Farben */
        .correct-bg {
            background-color: #d4edda !important;
            border-color: var(--success-color) !important;
        }

        .incorrect-bg {
            background-color: #f8d7da !important;
            border-color: var(--error-color) !important;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .btn-action {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: opacity 0.2s;
        }

        .btn-reset { background-color: #95a5a6; }
        .btn-solve { background-color: var(--accent-color); }
        .btn-action:hover { opacity: 0.8; }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .button-group { flex-direction: column; }
            .word-tile { font-size: 0.9em; padding: 6px 10px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Satzbau-Baukasten: Imperativ</h1>

    <div class="intro-box">
        <strong>Anleitung:</strong> Bilde einen korrekten russischen Satz. 
        Klicke auf die Wörter, um sie in den weißen Bereich zu schieben. Klicke sie im weißen Bereich an, um sie wieder zu entfernen. 
        Sobald alle Wörter im Satz sind, wird dieser automatisch überprüft (Grün = Richtig, Rot = Falsch).
    </div>

    <div id="exercise-list">
        <!-- Aufgaben werden per JS generiert -->
    </div>
</div>

<script>
    const sentences = [
        { id: 1, words: ["Откройте,", "пожалуйста,", "окно."], correct: ["Откройте,", "пожалуйста,", "окно."] },
        { id: 2, words: ["Пиши", "письмо", "маме."], correct: ["Пиши", "письмо", "маме."] },
        { id: 3, words: ["Не", "забудьте", "купить", "хлеб."], correct: ["Не", "забудьте", "купить", "хлеб."] },
        { id: 4, words: ["Садитесь", "на", "этот", "стул."], correct: ["Садитесь", "на", "этоt", "стул."] },
        { id: 5, words: ["Помоги", "мне,", "пожалуйста."], correct: ["Помоги", "мне,", "пожалуйста."] },
        { id: 6, words: ["Читайте", "текст", "на", "странице", "пять."], correct: ["Читайте", "текст", "на", "странице", "пять."] },
        { id: 7, words: ["Слушай", "внимательно", "эту", "музыку."], correct: ["Слушай", "внимательно", "эту", "музыку."] },
        { id: 8, words: ["Передай", "мне", "соль,", "пожалуйста."], correct: ["Передай", "мне", "соль,", "пожалуйста."] },
        { id: 9, colloqu: ["Расскажите", "нам", "интересную", "историю."], correct: ["Расскажите", "нам", "интересную", "историю."] },
        { id: 10, words: ["Купите", "билеты", "в", "кино."], correct: ["Купите", "билеты", "в", "кино."] },
        { id: 11, words: ["Посмотри", "на", "это", "фото."], correct: ["Посмотри", "на", "это", "фото."] },
        { id: 12, words: ["Закрой", "дверь,", "пожалуйста."], correct: ["Закрой", "дверь,", "пожалуйста."] },
        { id: 13, words: ["Не", "пей", "холодную", "воду."], correct: ["Не", "пей", "холодную", "воду."] },
        { id: 14, words: ["Ешь", "суп,", "пока", "он", "горячий."], correct: ["Ешь", "суп,", "пока", "он", "горячий."] },
        { id: 15, words: ["Позвоните", "мне", "завтра", "утром."], correct: ["Позвоните", "мне", "завтра", "утром."] },
        { id: 16, words: ["Улыбнись,", "всё", "будет", "хорошо!"], correct: ["Улыбнись,", "всё", "будет", "хорошо!"] },
        { id: 17, words: ["Говорите", "немного", "медленнее,", "пожалуйста."], correct: ["Говорите", "немного", "медленнее,", "пожалуйста."] },
        { id: 18, words: ["Возьмите", "свой", "зонт."], correct: ["Возьмите", "свой", "зонт."] },
        { id: 19, words: ["Иди", "домой", "после", "уроков."], correct: ["Иди", "домой", "после", "уроков."] },
        { id: 20, words: ["Старайтесь", "делать", "задания", "вовремя."], correct: ["Старайтесь", "делать", "задания", "вовремя."] }
    ];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function initExercises() {
        const root = document.getElementById('exercise-list');
        sentences.forEach((s) => {
            const card = document.createElement('div');
            card.className = 'task-card';
            card.id = `task-${s.id}`;

            const header = document.createElement('span');
            header.className = 'task-header';
            header.innerText = `Aufgabe ${s.id}`;
            card.appendChild(header);

            // Pool-Bereich
            const poolArea = document.createElement('div');
            poolArea.className = 'word-area pool';
            poolArea.id = `pool-${s.id}`;

            // Wort-Kacheln im Pool mischen
            const shuffledWords = shuffle([...s.words]);
            shuffledWords.forEach((word, idx) => {
                const tile = createTile(word, s.id);
                poolArea.appendChild(tile);
            });

            // Ergebnis-Bereich
            const resultArea = document.createElement('div');
            resultArea.className = 'word-area result-area';
            resultArea.id = `result-${s.id}`;

            // Buttons
            const btnGroup = document.createElement('div');
            btnGroup.className = 'button-group';
            btnGroup.innerHTML = `
                <button class="btn-action btn-reset" onclick="resetTask(${s.id})">Zurücksetzen</button>
                <button class="btn-action btn-solve" onclick="solveTask(${s.id})">Lösung anzeigen</button>
            `;

            card.appendChild(poolArea);
            card.appendChild(resultArea);
            card.appendChild(btnGroup);
            root.appendChild(card);
        });
    }

    function createTile(word, sentenceId) {
        const tile = document.createElement('div');
        tile.className = 'word-tile';
        tile.innerText = word;
        tile.onclick = () => moveTile(tile, sentenceId);
        return tile;
    }

    function moveTile(tile, sentenceId) {
        const pool = document.getElementById(`pool-${sentenceId}`);
        const result = document.getElementById(`result-${sentenceId}`);
        const resultArea = document.getElementById(`result-${sentenceId}`);

        if (tile.parentElement.id.startsWith('pool')) {
            result.appendChild(tile);
        } else {
            pool.appendChild(tile);
        }
        
        checkSentence(sentenceId);
    }

    function checkSentence(sentenceId) {
        const resultArea = document.getElementById(`result-${sentenceId}`);
        const pool = document.getElementById(`pool-${sentenceId}`);
        const currentWords = Array.from(resultArea.children).map(t => t.innerText);
        const originalData = sentences.find(s => s.id === sentenceId);

        // Nur prüfen, wenn der Pool leer ist (alle Wörter benutzt)
        if (pool.children.length === 0) {
            const isCorrect = JSON.stringify(currentWords) === JSON.stringify(originalData.correct);
            if (isCorrect) {
                resultArea.className = 'word-area result-area correct-bg';
            } else {
                resultArea.className = 'word-area result-area incorrect-bg';
            }
        } else {
            resultArea.className = 'word-area result-area';
        }
    }

    window.resetTask = function(id) {
        const pool = document.getElementById(`pool-${id}`);
        const result = document.getElementById(`result-${id}`);
        const originalData = sentences.find(s => s.id === id);
        
        // Alle Kacheln zurück in den Pool und neu mischen
        result.innerHTML = '';
        pool.innerHTML = '';
        shuffle([...originalData.words]).forEach(word => {
            pool.appendChild(createTile(word, id));
        });
        result.className = 'word-area result-area';
    };

    window.solveTask = function(id) {
        const pool = document.getElementById(`pool-${id}`);
        const result = document.getElementById(`result-${id}`);
        const originalData = sentences.find(s => s.id === id);
        
        pool.innerHTML = '';
        result.innerHTML = '';
        originalData.correct.forEach(word => {
            const tile = createTile(word, id);
            result.appendChild(tile);
        });
        result.className = 'word-area result-area correct-bg';
    };

    // Initialisierung starten
    initExercises();
</script>

</body>
</html>